<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="height=device-height, initial-scale=1.0">
    <title>Login</title>
    <!-- update the version number as needed -->
    <link rel="stylesheet" href="css/style.css">
    <script defer src="/__/firebase/5.5.4/firebase-app.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/5.5.4/firebase-auth.js"></script>
    <script defer src="/__/firebase/5.5.4/firebase-database.js"></script>
    <script defer src="/__/firebase/5.5.4/firebase-messaging.js"></script>
    <script defer src="/__/firebase/5.5.4/firebase-storage.js"></script>
 <!-- initialize the SDK after all desired features are loaded -->
    <script defer src="/__/firebase/init.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.2.1.js" type="text/javascript"></script>
    <script src="https://www.gstatic.com/firebasejs/5.5.5/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/3.6.1/firebase.js"></script>

</head>

<body>
    <div class="background">
        <nav>
            <div class="menu-icon">
                <i class="fa fa-bars"></i>
            </div>
            <div class="logo"><a style="text-decoration: none; " href="index.html">ENGLISH FOR YOU</a></div>
            <ul>
                <li><a href="waitingpage.html">Words Explain</a></li>
                <li><a href="">Chat</a></li>
                <li><a href="">Listen</a></li>
                <li><a class="active" href="login.html">Login</a></li>
                <li><a id="logout-btn" onclick="facebookSignout()" type="button" href="#" class="active">Logout</a></li>
            </ul>
        </nav>
        <div class="box">
            <h1 style="color:white;text-align: center;">LOGIN</h1>
            <form>
                <div class="inputbox">
                    <input type="text" name="">
                    <label>Email</label>
                </div>
                <div class="inputbox">
                    <input type="password" name="">
                    <label>Password</label>
                </div>
                <div>
                    <input class="checkbox" type="checkbox" name="" value="" text="remember me">
                    <label style="color:white; font-size: 15px;">remember me</label>
                </div>
                <div class="fb-icon">
                    <button id="login-btn" onclick="facebookSignin()" type="button" style="width: 100%; height: 100%;"><i class="fa fa-facebook-square" style="font-size:24px"></i>
                        Login with facebook
                    </button>
                </div>
                <!-- <div class="fb-login-button" data-max-rows="1" data-size="large" data-button-type="continue_with" data-show-faces="false" data-auto-logout-link="false" data-use-continue-as="false" onclick="facebookSignin()"></div> -->
                <!-- <a id="logout-btn" onclick="facebookSignout()" type="button" href="#">Facebook Signout</a> -->
                <input class="btnlogin " type="submit" name="" value="Sign in">
                <input class="btnlogin signup" type="submit" name="" value="Sign up">
            </form>
        </div>
    </div>
<script type="text/javascript">
    // Menu-toggle button
    $(document).ready(function() {
        $(".menu-icon").on("click", function() {
            $("nav ul").toggleClass("showing");
        });
    });

    // Scrolling Effect

    // $(window).on("scroll", function() {
    //       if($(window).scrollTop()) {
    //             $('nav').addClass('black');
    //       }

    //       else {
    //             $('nav').removeClass('black');
    //       }
    // });
    //
    //

    Initialize Firebase
    var config = {
        apiKey: "AIzaSyD0w9tdWNXsfoQV9MsuQRmIJipDSIZS2po",
        authDomain: "engs4you.firebaseapp.com",
        databaseURL: "https://engs4you.firebaseio.com",
        projectId: "engs4you",
        storageBucket: "engs4you.appspot.com",
        messagingSenderId: "190175477827"
    };
    firebase.initializeApp(config);

    // var firebase = require('firebase');
    // import firebase from "firebase";
    var provider = new firebase.auth.FacebookAuthProvider();
    firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
            document.getElementById('login-btn').hidden = true;
            document.getElementsByClassName('active')[0].style.display = "none";
            document.getElementById('logout-btn').style.display = "inline";
            // window.open('index.html','_self');
        } else {
            document.getElementById('login-btn').hidden = false;
            document.getElementById('logout-btn').style.display = "none";
            document.getElementsByClassName('active')[0].style.display = "inline";


        }
    // });
    // kiem tra xem da dang nhap hay chua
    function facebookSignin() {
        firebase.auth().signInWithPopup(provider)

            .then(function(result) {
                var token = result.credential.accessToken;
                var user = result.user;
                console.log(token)

                console.log(user)
            }).catch(function(error) {
                console.log(error);
                console.log(error.code);
                console.log(error.message);
            });
    }

    function facebookSignout() {
        firebase.auth().signOut()

            .then(function() {
                console.log('Signout successful!');
            }, function(error) {
                console.log('Signout failed');
            });
    }
    </script>
   <!--  <script type="text/javascript" src="javascript/bundle.js" async></script> -->

</body>

</html>